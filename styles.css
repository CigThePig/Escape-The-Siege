
:root{--bg:#0b0f1e;--panel:#151a2e;--text:#e8ecff;--muted:#9aa4c7;--accent:#67d4ff;--danger:#ff6b6b;--good:#7dff9d;--warn:#ffd166}
*{box-sizing:border-box}body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,'Helvetica Neue',Arial,'Apple Color Emoji','Segoe UI Emoji';background:radial-gradient(60vmax 60vmax at 50% -10%,#1b1f36,#0b0d18 60%,#070813 100%);color:var(--text);display:flex;min-height:100vh;align-items:stretch;justify-content:center}
.wrap{display:grid;grid-template-columns:1fr 360px;gap:16px;width:min(1300px,100%);padding:12px}@media(max-width:900px){.wrap{grid-template-columns:1fr}}
.panel{background:linear-gradient(180deg,#1a1f36,#121528);border:1px solid rgba(255,255,255,.06);border-radius:14px;box-shadow:0 8px 24px rgba(0,0,0,.35),inset 0 1px 0 rgba(255,255,255,.06);padding:12px}
h1{font-size:18px;margin:0 0 6px;font-weight:700;letter-spacing:.4px}
.hud{display:flex;flex-wrap:wrap;gap:8px;align-items:center;margin-bottom:8px}
.stat{display:flex;justify-content:space-between;align-items:center;flex:1 1 120px;gap:8px;padding:8px 12px;border-radius:10px;background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.06)}
.stat.hp.flash{background:rgba(255,107,107,.18);color:#ffd1d1}.stat .label{font-size:12px;color:var(--muted);line-height:1}.stat .value{font-weight:700;font-size:16px}
#gameCanvas{width:100%;aspect-ratio:1/1;display:block;border-radius:12px;background:#0e1020;outline:1px solid rgba(255,255,255,.06);touch-action:manipulation}
.right{display:grid;grid-template-rows:auto auto 1fr auto;gap:12px}
.btn{cursor:pointer;user-select:none;padding:10px 12px;border-radius:10px;border:1px solid rgba(255,255,255,.08);background:linear-gradient(180deg,#283053,#1b2142);color:var(--text);font-weight:700;letter-spacing:.2px;text-align:center}
.btn:active{transform:translateY(1px) scale(.99)}.btn.primary{background:linear-gradient(180deg,#2b6fff,#184fe8);border-color:#2b6fff}.btn.ghost{background:rgba(255,255,255,.04)}.btn.danger{background:linear-gradient(180deg,#ff4d4f,#d9363e);border-color:#ff4d4f;color:#fff}
.row{display:grid;grid-template-columns:1fr 1fr;gap:8px}.row+.row{margin-top:8px}.tools{display:grid;grid-template-columns:1fr 1fr;gap:8px}
.toolbtn{padding:8px 10px;border-radius:10px;border:1px solid rgba(255,255,255,.08);background:rgba(255,255,255,.03);color:var(--text);font-weight:700;text-align:left}
.toolbtn.active{outline:2px solid var(--accent);background:rgba(103,212,255,.08)}.tileLegend{display:grid;grid-template-columns:1fr 1fr;gap:6px;font-size:12px;color:var(--muted)}
.legendItem{display:grid;grid-template-columns:16px 1fr;gap:6px;align-items:center}.swatch{width:16px;height:16px;border-radius:4px}
.log{height:120px;overflow:auto;padding:8px;border-radius:10px;background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.06);font-size:12px;line-height:1.3}.log p{margin:0 0 6px;color:var(--muted)}
.mobileControls{display:grid;gap:8px;margin-top:10px;user-select:none}.dpad{width:100%;display:grid;grid-template-columns:1fr 1fr 1fr;grid-template-rows:1fr 1fr 1fr;gap:6px;place-items:stretch}
.dpad .padbtn{min-height:54px;border-radius:10px;border:1px solid rgba(255,255,255,.08);background:linear-gradient(180deg,#22294b,#171d3a);color:var(--text);font-weight:800;font-size:16px;display:grid;place-items:center}
.pad-empty{background:transparent;border:none}.footer{color:var(--muted);font-size:12px;text-align:center}.pill{display:inline-block;padding:2px 8px;border-radius:999px;font-size:12px;font-weight:700;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12)}
.placeMode{outline:2px solid var(--accent)}.dashArmed{filter:drop-shadow(0 0 6px #67d4ff)}
